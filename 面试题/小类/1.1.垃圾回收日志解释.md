# 测试例子
```java
private static final int _1MB = 1024 * 1024;

    public static void main(String[] args) {
        // Step 1: 分配 2MB 对象 → Eden
        byte[] allocation1 = new byte[2 * _1MB];

        // Step 2: 再分配 2MB 对象 → Eden
        byte[] allocation2 = new byte[2 * _1MB];

        // Step 3: 分配 2MB 对象 → Eden
        byte[] allocation3 = new byte[2 * _1MB];

        // Step 4: 再分配 4MB 对象 → Eden 空间不足，触发 Minor GC
        byte[] allocation4 = new byte[4 * _1MB];
    }
```
# -XX:+PrintGCDetails -Xms20M -Xmx20M -Xmn10M -XX:SurvivorRatio=8
堆大小：20M（固定）
新生代：10M（其中 Eden: 8M，Survivor: 1M + 1M）
老年代：10M
SurvivorRatio=8 → Eden : Survivor = 8:1:1

# 第一次 GC
[GC (Allocation Failure) [PSYoungGen: 8192K->1000K(9216K)] 8192K->1746K(19456K), 0.0019185 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 

GC (Allocation Failure) → 由于 Eden 空间不足触发 Minor GC。
PSYoungGen: 8192K->1000K(9216K)
新生代占满 8192K → GC 后只剩 1000K 存活对象。
8192K->1746K(19456K)
整个堆（Young + Old）使用量从 8192K → 1746K。
耗时 0.0019s → GC 很快。

# 第2次 GC
[GC (Allocation Failure) [PSYoungGen: 7334K->1000K(9216K)] 8080K->6484K(19456K), 0.0026953 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 

再次 Eden 空间不足，触发 Minor GC。
PSYoungGen: 7334K->1000K → 年轻代清理后又剩 1M。
8080K->6484K → GC 后对象被晋升到老年代，老年代占用变多。

# Full GC
[Full GC (Ergonomics) [PSYoungGen: 1000K->0K(9216K)]
[ParOldGen: 5484K->5673K(10240K)] 6484K->5673K(19456K),
[Metaspace: 5741K->5735K(1056768K)], 0.0110116 secs] 
[Times: user=0.03 sys=0.01, real=0.01 secs] 
Full GC (Ergonomics) → JVM 根据内存压力（老年代空间不足趋势）主动触发。
PSYoungGen: 1000K->0K → 年轻代被清空。
ParOldGen: 5484K->5673K → 老年代清理后反而 增加，说明有对象晋升到了老年代。
6484K->5673K → 整个堆从 6484K → 5673K。
Metaspace: 5741K->5735K → 类元数据占用几乎没变。
耗时 0.011s → Full GC 耗时更久。


Heap
 PSYoungGen      total 9216K, used 6469K [0x00000000ff600000, 0x0000000100000000, 0x0000000100000000)
  eden space 8192K, 78% used [0x00000000ff600000,0x00000000ffc51578,0x00000000ffe00000)
  from space 1024K, 0% used [0x00000000fff00000,0x00000000fff00000,0x0000000100000000)
  to   space 1024K, 0% used [0x00000000ffe00000,0x00000000ffe00000,0x00000000fff00000)
 ParOldGen       total 10240K, used 5673K [0x00000000fec00000, 0x00000000ff600000, 0x00000000ff600000)
  object space 10240K, 55% used [0x00000000fec00000,0x00000000ff18a6c8,0x00000000ff600000)
 Metaspace       used 5744K, capacity 5910K, committed 6144K, reserved 1056768K
  class space    used 650K, capacity 695K, committed 768K, reserved 1048576K

